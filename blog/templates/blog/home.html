{% extends 'blog/base.html' %}
{% block title %}Home{% endblock title %}
 
{% block content %}

<div class="row">
    <div class="col-md-8">
        <form action="{% url 'blog:search' %}">
            {% csrf_token %}
            <input type="search" placeholder="Enter your search here" name="query" class="form-control">
            <button class="btn btn-outline-success mb-5">Search</button>
        </form>

        {% for post in posts %}
        <article class="article">
            <p class="author"><a href="{% url 'blog:user_posts' post.author.username %}">{{ post.author }}</a> on
                {{ post.date_posted }}</p>
            <h3><a href="{% url 'blog:post_detail' post.pk %}">{{ post.title }}</a></h3>
            <img src="{{post.author.profile.p_pic.url}}" class="rounded-circle z-depth-0" alt="avatar image"
                height="35">
            <p class="mr-10">{{ post.content|truncatewords:30 }}<a href="{% url 'blog:post_detail' post.pk %}"> Read
                    More</a></p>
        </article>
        
        <hr>
        <hr>
        {% endfor %}

        {% if is_paginated %}

        {% if page_obj.has_previous %}
        <a class="btn btn-outline-info" href="?page=1">First</a>
        <a class="btn btn-outline-info" href="?page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
        <a class="btn btn-info" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
        <a class="btn btn-outline-info" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
        <a class="btn btn-outline-info" href="?page={{ page_obj.next_page_number }}">Next</a>
        <a class="btn btn-outline-info" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
        {% endif %}

        {% endif %}
    </div>


    <div class="col-md-4">
        <div class="content-section mt-5">
            <h3>Highlights</h3>
            <hr>
            <p>Latest posts</p>
            <hr>
            <p>Calenders</p>
            <hr>
            <p>Lifestyle</p>
            <hr>
        </div>
    </div>
</div>

{% endblock content %}